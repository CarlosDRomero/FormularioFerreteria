


--para obtener que cliente compro en la tienda 3
SELECT c.prim_nombre || ' ' || c.seg_nombre || ' ' || c.prim_apellido || ' ' || c.seg_apellido AS nombre_cliente, e.marca
FROM cliente c
JOIN compra co ON c.id_cliente = co.id_cliente
JOIN celular ce ON co.id_celular = ce.id_celular
JOIN tienda t ON co.id_tienda = t.id_tienda
JOIN especificaciones e ON ce.id_especificacion = e.id_especificacion
WHERE t.id_tienda = 3;

--Para obtener la cantidad de clientes que han escogido un plan pospago,
SELECT COUNT(*) AS total_compras
FROM compra c
JOIN sim s ON c.id_sim = s.id_sim
JOIN plan p ON s.id_plan = p.id_plan
JOIN detalles_plan dp ON p.id_detalle = dp.id_detalle
JOIN Tipo_sim ts ON s.id_tiposim = ts.id_tiposim
WHERE ts.tipo = 'pospago'
AND dp.duracion = 'mensual';


para obtener el cliente, tipo_plan, marca celular, tienda compra, precio
SELECT c.prim_nombre || ' ' || c.prim_apellido AS nombre_cliente, 
       pl.servicio AS tipo_plan, 
       e.marca AS marca_celular, 
       t.direccion AS tienda_compra,
       ce.precio AS precio
FROM compra co
JOIN cliente c ON co.id_cliente = c.id_cliente
JOIN sim s ON co.id_sim = s.id_sim
JOIN plan pl ON s.id_plan = pl.id_plan
JOIN celular ce ON co.id_celular = ce.id_celular
JOIN especificaciones e ON ce.id_especificacion = e.id_especificacion
JOIN tienda t ON co.id_tienda = t.id_tienda;










-- Eliminar tabla compra
DROP TABLE compra;

-- Eliminar tabla sim
DROP TABLE sim;

-- Eliminar tabla celular
DROP TABLE celular;

-- Eliminar tabla plan
DROP TABLE plan;

-- Eliminar tabla detalle_apps
DROP TABLE detalle_apps;

-- Eliminar tabla detalles_plan
DROP TABLE detalles_plan;

-- Eliminar tabla especificaciones
DROP TABLE especificaciones;

-- Eliminar tabla cliente
DROP TABLE cliente;

-- Eliminar tabla tienda
DROP TABLE tienda;

-- Eliminar tabla Tipo_sim
DROP TABLE Tipo_sim;

-- Eliminar tabla apps
DROP TABLE apps;

-- Eliminar tabla empresa
DROP TABLE empresa;

-- Eliminar secuencia secuencia_id_compra
DROP SEQUENCE secuencia_id_compra;

-- Eliminar secuencia secuencia_id_sim
DROP SEQUENCE secuencia_id_sim;

-- Eliminar secuencia secuencia_id_celular
DROP SEQUENCE secuencia_id_celular;

-- Eliminar secuencia secuencia_id_plan
DROP SEQUENCE secuencia_id_plan;

-- Eliminar secuencia secuencia_id_detalle
DROP SEQUENCE secuencia_id_detalle;

-- Eliminar secuencia secuencia_id_especificacion
DROP SEQUENCE secuencia_id_especificacion;

-- Eliminar secuencia secuencia_id_cliente
DROP SEQUENCE secuencia_id_cliente;

-- Eliminar secuencia secuencia_id_tienda
DROP SEQUENCE secuencia_id_tienda;

-- Eliminar secuencia secuencia_id_tiposim
DROP SEQUENCE secuencia_id_tiposim;

-- Eliminar secuencia secuencia_id_app
DROP SEQUENCE secuencia_id_app;

-- Eliminar secuencia secuencia_id_empresa
DROP SEQUENCE secuencia_id_empresa;

